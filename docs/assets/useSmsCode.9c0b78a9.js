import{R as B}from"./rule.a5db4623.js";import{r as C,e as v,bP as E}from"./index.2c320f72.js";import{u as m}from"./useBoolean.97a0ae87.js";function A(t=!1){const{bool:o,setTrue:a,setFalse:s}=m(t);return{loading:o,startLoading:a,endLoading:s}}function w(t){if(t<=0&&t%1!==0)throw Error("\u5012\u8BA1\u65F6\u7684\u65F6\u95F4\u5E94\u8BE5\u4E3A\u4E00\u4E2A\u6B63\u6574\u6570\uFF01");const{bool:o,setTrue:a,setFalse:s}=m(!1),e=C(0),r=v(()=>Boolean(e.value));let n;function f(F=t){e.value||(s(),e.value=F,n=setInterval(()=>{e.value-=1,e.value<=0&&(clearInterval(n),a())},1e3))}function d(){n=clearInterval(n),e.value=0}return{counts:e,isCounting:r,start:f,stop:d,isComplete:o}}function p(){const{loading:t,startLoading:o,endLoading:a}=A(),{counts:s,start:e,isCounting:r}=w(60),n="\u83B7\u53D6\u9A8C\u8BC1\u7801",f=u=>`${u}\u79D2\u540E\u91CD\u65B0\u83B7\u53D6`,d=v(()=>{let u=n;return t.value&&(u=""),r.value&&(u=f(s.value)),u});function F(u){var c,i;let l=!0;return u.trim()===""?((c=window.$message)==null||c.error("\u624B\u673A\u53F7\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),l=!1):B.test(u)||((i=window.$message)==null||i.error("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u9519\u8BEF\uFF01"),l=!1),l}async function g(u){var i;if(!F(u)||t.value)return;o();const{data:c}=await E(u);c&&((i=window.$message)==null||i.success("\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F\uFF01"),e()),a()}return{label:d,start:e,isCounting:r,getSmsCode:g,loading:t}}export{p as u};
