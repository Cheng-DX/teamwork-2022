import{d as _,a0 as $,o as j,a6 as v,r as P,ac as O,f as t,ad as R,_ as o,h as d,ae as q}from"./index.a6534a2f.js";import{f as M,_ as W,a as Z}from"./rule.94ce4fe0.js";import{_ as C}from"./Space.8a45e35f.js";import{_ as h}from"./Input.fe4f00e9.js";import{_ as I}from"./InputNumber.4bdae33a.js";import{N as G,o as J}from"./index.77493d12.js";import{_ as K}from"./Dropdown.2b5865a1.js";import{N as D}from"./Icon.08859a55.js";const Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},X=v("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),Y=v("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),S=[X,Y];var ee=_({name:"Add",render:function(l,s){return j(),$("svg",Q,S)}});const te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ne=v("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"44",d:"M358.62 129.28L86.49 402.08L70 442l39.92-16.49l272.8-272.13l-24.1-24.1z"},null,-1),se=v("path",{d:"M413.07 74.84l-11.79 11.78l24.1 24.1l11.79-11.79a16.51 16.51 0 0 0 0-23.34l-.75-.75a16.51 16.51 0 0 0-23.35 0z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"44"},null,-1),le=[ne,se];var ue=_({name:"Pencil",render:function(l,s){return j(),$("svg",te,le)}});const re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ae=v("path",{d:"M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8z",fill:"none"},null,-1),ie=v("path",{d:"M432 96h-96V72a40 40 0 0 0-40-40h-80a40 40 0 0 0-40 40v24H80a16 16 0 0 0 0 32h17l19 304.92c1.42 26.85 22 47.08 48 47.08h184c26.13 0 46.3-19.78 48-47l19-305h17a16 16 0 0 0 0-32zM192.57 416H192a16 16 0 0 1-16-15.43l-8-224a16 16 0 1 1 32-1.14l8 224A16 16 0 0 1 192.57 416zM272 400a16 16 0 0 1-32 0V176a16 16 0 0 1 32 0zm32-304h-96V72a7.91 7.91 0 0 1 8-8h80a7.91 7.91 0 0 1 8 8zm32 304.57A16 16 0 0 1 320 416h-.58A16 16 0 0 1 304 399.43l8-224a16 16 0 1 1 32 1.14z",fill:"currentColor"},null,-1),oe=[ae,ie];var de=_({name:"Trash",render:function(l,s){return j(),$("svg",re,oe)}});function H(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!R(n)}function fe(n){return t(q,null,[t(o,{type:"primary",round:!0,secondary:!0,size:"medium"},H(n)?n:{default:()=>[n]}),t("div",{class:"w-18px"},null)])}var ye=_({props:{columnSrcs:{type:Array,required:!0}},setup(n){var p,k,g,B,A,E,T;const l=P(null),s=O({}),u={};function a(e){!l.value||(e.preventDefault(),l.value.validate(r=>{var y,c;r?(c=window.$message)==null||c.error("\u672A\u901A\u8FC7\u9A8C\u8BC1"):(y=window.$message)==null||y.success("Succeed!")}))}for(const e of n.columnSrcs){u[e.key]=((p=e==null?void 0:e.form)==null?void 0:p.type)==="number"?M.biggerThenZeroInt:M.notBlank;const r=(k=e.form)==null?void 0:k.defaultValue;if(r==null)(g=e==null?void 0:e.form)!=null&&g.creator?s[e.key]=e.form.creator():((B=e==null?void 0:e.form)==null?void 0:B.type)==="number"?s[e.key]=0:((A=e==null?void 0:e.form)==null?void 0:A.type)==="date"?s[e.key]=new Date().getTime():((E=e==null?void 0:e.form)==null?void 0:E.type)==="select"?s[e.key]=null:s[e.key]="";else{switch((T=e==null?void 0:e.form)==null?void 0:T.type){case"number":s[e.key]=Number(r);break;case"input":s[e.key]=String(r);break;case"select":s[e.key]=r;break;default:s[e.key]="";break}s[e.key]=r}}function i(e,r){var m,F,z,V,N,U;console.log(e);const y=((m=e==null?void 0:e.form)==null?void 0:m.placeholder)||`\u8BF7${((F=e==null?void 0:e.form)==null?void 0:F.type)==="select"?"\u9009\u62E9":"\u8F93\u5165"}${e.title}`,c=((z=e==null?void 0:e.form)==null?void 0:z.disabled)||!1;if((V=e.form)!=null&&V.renderer)return e.form.renderer(r[e.key]);if((N=e==null?void 0:e.form)!=null&&N.type)switch(e.form.type){case"input":return e.key==="id"?t("div",{class:"flex-y-center w-full"},[fe(e.title),t(h,{value:r[e.key],"onUpdate:value":f=>r[e.key]=f,placeholder:y,disabled:c,class:"w-full"},null)]):t(h,{value:r[e.key],"onUpdate:value":f=>r[e.key]=f,placeholder:y,disabled:c,class:"w-full"},null);case"select":return t(K,{value:r[e.key],"onUpdate:value":f=>r[e.key]=f,options:(U=e.form)==null?void 0:U.options,placeholder:y,disabled:c,class:"w-full"},null);case"date":return t(G,{value:r[e.key],"onUpdate:value":f=>r[e.key]=f,placeholder:y,disabled:c,class:"w-full"},null);case"number":return t(I,{value:r[e.key],"onUpdate:value":f=>r[e.key]=f,placeholder:y,validator:f=>f>0,disabled:c,class:"w-full"},null);case"textarea":return t(h,{type:"textarea",value:r[e.key],"onUpdate:value":f=>r[e.key]=f,placeholder:y,disabled:c,class:"w-full"},null);default:return t(h,{value:r[e.key],"onUpdate:value":f=>r[e.key]=f,placeholder:y,disabled:c,class:"w-full"},null)}else return t(h,{value:r[e.key],"onUpdate:value":f=>r[e.key]=f,placeholder:y,disabled:c,class:"w-full"},null)}return()=>t(Z,{ref:l,model:s,rules:u,size:"large",showLabel:!1},{default:()=>[n.columnSrcs.map(e=>{var y;let r;return(y=e==null?void 0:e.form)!=null&&y.break?null:t(W,{path:e.key,class:"w-full"},H(r=i(e,s))?r:{default:()=>[r]})}),t(C,{vertical:!0,size:18},{default:()=>[t(o,{type:"primary",round:!0,size:"large",block:!0,onClick:a},{default:()=>[d("\u786E\u5B9A")]})]})]})}});function Ce(n){function l(s){var u;(u=window.$dialog)==null||u.warning({title:"\u63D0\u793A",content:"\u786E\u5B9A\u79DF\u7528\u8BE5\u8BBE\u5907\u5417?",positiveText:"\u786E\u5B9A",onPositiveClick(){var a;n(s),(a=window.$message)==null||a.success("\u79DF\u7528\u6210\u529F")},negativeText:"\u53D6\u6D88"})}return{title:"\u79DF\u7528",key:"delete",align:"center",render:s=>t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,onClick:()=>l(s),type:"primary"},{default:()=>[t(D,null,{default:()=>[t(ee,null,null)]}),d("\u79DF\u7528")]})])}}function L(n,l){if(n!=null&&n.handler(l))n!=null&&n.acceptAction&&n.acceptAction();else if(n!=null&&n.rejectAction&&n.rejectAction(),n!=null&&n.returnImdiately)return!0;return!1}function $e(n,l){function s(u){var a;l&&L(l,u)||(a=window.$dialog)==null||a.warning({title:"Warning",content:"\u786E\u5B9A\u8981\u5220\u9664\u5417?",positiveText:"\u786E\u5B9A",onPositiveClick(){n(u)},negativeText:"\u53D6\u6D88"})}return{title:"\u5220\u9664",key:"delete",align:"center",render:u=>t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,onClick:()=>s(u),type:"error"},{default:()=>[t(D,null,{default:()=>[t(de,null,null)]}),d("\u5220\u9664")]})])}}function pe(n,l,s){function u(a){var i;l&&L(l,a)||(n.forEach(p=>{var g;const k=p.key;p.form?((g=p.form)!=null&&g.type||(p.form.type="input"),p.form.defaultValue=a[k]):p.form={type:"input",defaultValue:a[k]}}),(i=window.$dialog)==null||i.info({title:"\u7F16\u8F91",content:()=>t(ye,{columnSrcs:n},null)}))}return{title:"\u7F16\u8F91",key:"edit",align:"center",render:a=>t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,onClick:()=>u(a),type:"primary"},{default:()=>[s?null:t(D,null,{default:()=>[t(ue,null,null)]}),d("\u7F16\u8F91")]})])}}function x(n){function l(s){var u;(u=window.$dialog)==null||u.info({title:"\u6295\u6807\u8BE6\u60C5",content:()=>t("div",null,[d("\u6295\u6807\u8BE6\u60C5")])})}return t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,onClick:()=>l(),type:"info"},{default:()=>[d("\u6295\u6807\u8BE6\u60C5")]})])}function w(n,l,s){var u;(u=window.$dialog)==null||u.warning({title:()=>t("div",null,[d("\u5373\u5C06\u66F4\u6539\u8BA2\u5355\u72B6\u6001\u81F3"),t(o,{strong:!0,secondary:!0,type:"primary",size:"small",style:{marginLeft:"10px"}},{default:()=>{var a;return[(a=J.find(i=>i.value===s))==null?void 0:a.label]}})]),content:"\u786E\u5B9A\u5417?",positiveText:"\u786E\u5B9A",onPositiveClick(){var a;l(n,s),(a=window.$message)==null||a.success("\u64CD\u4F5C\u6210\u529F")},negativeText:"\u53D6\u6D88"})}function b(n,l){var u;const s=P(0);(u=window.$dialog)==null||u.info({title:"\u8BF7\u8F93\u5165\u60A8\u7684\u51FA\u4EF7",content:()=>t(I,{value:s,"onUpdate:value":a=>s=a,validator:a=>/^[1-9]\d*$/.test(a.toString())&&a.toString().trim()!==""},null),positiveText:"\u786E\u5B9A",onPositiveClick(){var a,i;/^[1-9]\d*$/.test(s.toString())||s.toString().trim()!==""?((a=window.$message)==null||a.success("\u51FA\u4EF7\u6210\u529F\uFF01\u8BA2\u5355\u82E5\u4E2D\u6807\u60A8\u5C06\u4F1A\u6536\u5230\u901A\u77E5"),l(n,"bided")):(i=window.$message)==null||i.error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u51FA\u4EF7")},negativeText:"\u53D6\u6D88"})}function ce(n,l){var s;(s=window.$dialog)==null||s.info({title:"\u8BF7\u8F93\u5165\u60A8\u7684\u8FDB\u5EA6",positiveText:"\u786E\u5B9A",onPositiveClick(){var u;(u=window.$message)==null||u.success("\u64CD\u4F5C\u6210\u529F"),l(n,"producing")}})}function je(n,l,s,u,a){return{title:"\u64CD\u4F5C",key:"option",align:"center",render:i=>{switch(i.status){case"unpublished":return t(C,{vertical:!0},{default:()=>{var p;return[(p=pe(n,s,!0))==null?void 0:p.render(i),t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,onClick:()=>w(i,l,"biding"),type:"success"},{default:()=>[d("\u53D1\u5E03")]})])]}});case"biding":return u?t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,type:"success",onClick:()=>b(i,l)},{default:()=>[d("\u6295\u6807")]})]):t(C,null,{default:()=>[x(),t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,onClick:()=>w(i,l,"bided"),type:"success"},{default:()=>[d("\u7ED3\u675F\u6295\u6807")]})])]});case"bided":return u?a?t("div",null,[t(o,{secondary:!0,strong:!0,onClick:()=>ce(i,l),type:"info"},{default:()=>[d("\u6392\u4EA7")]})]):t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,type:"success",disabled:!0,onClick:()=>b(i,l)},{default:()=>[d("\u5DF2\u6295\u6807")]})]):x();case"scheduled":return u?t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,type:"success",disabled:!0,onClick:()=>b(i,l)},{default:()=>[d("\u5DF2\u6295\u6807")]})]):x();case"producing":return u?t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,color:"gold",onClick:()=>w(i,l,"produced")},{default:()=>[d("\u5B8C\u5DE5")]})]):t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,disabled:!0,type:"tertiary"},{default:()=>[d("\u7B49\u5F85\u751F\u4EA7\u7ED3\u675F")]})]);case"produced":return u?t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,type:"warning",onClick:()=>w(i,l,"shipped")},{default:()=>[d("\u53D1\u8D27")]})]):t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,disabled:!0,type:"tertiary"},{default:()=>[d("\u7B49\u5F85\u5DE5\u5382\u53D1\u8D27")]})]);case"shipped":return u?t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,type:"info",disabled:!0},{default:()=>[d("\u7B49\u5F85\u6536\u8D27")]})]):t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,type:"success",onClick:()=>w(i,l,"finished")},{default:()=>[d("\u786E\u8BA4\u6536\u8D27")]})]);case"finished":return t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,disabled:!0,type:"success"},{default:()=>[d("\u8BA2\u5355\u5DF2\u5B8C\u6210")]})]);default:return t("div",null,[i.status])}}}}function De(n){return{title:"\u914D\u7F6E\u4EA7\u54C1",key:"config",align:"center",render:l=>t("div",{class:"flex justify-evenly"},[t(o,{secondary:!0,strong:!0,onClick:()=>n(l),type:"success"},{default:()=>[d("\u914D\u7F6E\u4EA7\u54C1")]})])}}export{ye as A,$e as a,pe as b,De as c,Ce as d,je as u};
