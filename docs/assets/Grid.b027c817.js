import{am as V,e as g,r as N,an as P,L,d as k,M as q,Z as $,m as E,ao as Q,x as T,P as x,V as D,A as F,a3 as W,W as X,ap as z,K as U}from"./index.715954a5.js";import{g as Y}from"./get-slot.ef4c002f.js";let C=[];const I=new WeakMap;function Z(){C.forEach(e=>e(...I.get(e))),C=[]}function H(e,...n){I.set(e,n),!C.includes(e)&&C.push(e)===1&&requestAnimationFrame(Z)}function J(e){if(typeof e=="number")return{"":e.toString()};const n={};return e.split(/ +/).forEach(a=>{if(a==="")return;const[r,t]=a.split(":");t===void 0?n[""]=r:n[r]=t}),n}function y(e,n){var a;if(e==null)return;const r=J(e);if(n===void 0)return r[""];if(typeof n=="string")return(a=r[n])!==null&&a!==void 0?a:r[""];if(Array.isArray(n)){for(let t=n.length-1;t>=0;--t){const s=n[t];if(s in r)return r[s]}return r[""]}else{let t,s=-1;return Object.keys(r).forEach(o=>{const i=Number(o);!Number.isNaN(i)&&n>=i&&i>=s&&(s=i,t=r[o])}),t}}const K={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function ee(e){return`(min-width: ${e}px)`}const w={};function te(e=K){if(!V)return g(()=>[]);if(typeof window.matchMedia!="function")return g(()=>[]);const n=N({}),a=Object.keys(e),r=(t,s)=>{t.matches?n.value[s]=!0:n.value[s]=!1};return a.forEach(t=>{const s=e[t];let o,i;w[s]===void 0?(o=window.matchMedia(ee(s)),o.addEventListener?o.addEventListener("change",f=>{i.forEach(p=>{p(f,t)})}):o.addListener&&o.addListener(f=>{i.forEach(p=>{p(f,t)})}),i=new Set,w[s]={mql:o,cbs:i}):(o=w[s].mql,i=w[s].cbs),i.add(r),o.matches&&i.forEach(f=>{f(o,t)})}),P(()=>{a.forEach(t=>{const{cbs:s}=w[e[t]];s.has(r)&&s.delete(r)})}),g(()=>{const{value:t}=n;return a.filter(s=>t[s])})}const M=1,j=L("n-grid"),A=1,ne={span:{type:[Number,String],default:A},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var ae=k({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:ne,setup(){const{xGapRef:e,itemStyleRef:n,overflowRef:a}=q(j),r=Q();return{overflow:a,itemStyle:n,deriveStyle:()=>{const{privateSpan:t=A,privateShow:s=!0,privateColStart:o=void 0,privateOffset:i=0}=r.vnode.props,{value:f}=e,p=$(f||0);return{display:s?"":"none",gridColumn:`${o!=null?o:`span ${t}`} / span ${t}`,marginLeft:i?`calc((100% - (${t} - 1) * ${p}) / ${t} * ${i} + ${p} * ${i})`:""}}}},render(){var e,n;return E("div",{style:[this.itemStyle,this.deriveStyle()]},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e,{overflow:this.overflow}))}});const se={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},O=24,re={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:O},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var le=k({name:"Grid",inheritAttrs:!1,props:re,setup(e){const{mergedClsPrefixRef:n,mergedBreakpointsRef:a}=T(e),r=/^\d+$/,t=N(void 0),s=te((a==null?void 0:a.value)||se),o=x(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),i=g(()=>{if(!!o.value)return e.responsive==="self"?t.value:s.value}),f=x(()=>{var u;return(u=Number(y(e.cols.toString(),i.value)))!==null&&u!==void 0?u:O}),p=x(()=>y(e.xGap.toString(),i.value)),G=x(()=>y(e.yGap.toString(),i.value)),v=u=>{t.value=u.contentRect.width},_=u=>{H(v,u)},m=N(!1),d=g(()=>{if(e.responsive==="self")return _});return D(j,{itemStyleRef:F(e,"itemStyle"),xGapRef:p,overflowRef:m}),{mergedClsPrefix:n,style:g(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${f.value}, minmax(0, 1fr))`,columnGap:$(p.value),rowGap:$(G.value)})),isResponsive:o,responsiveQuery:i,responsiveCols:f,handleResize:d,overflow:m}},render(){const e=()=>{var n,a,r,t,s,o;this.overflow=!1;const i=X(Y(this)),f=[],{collapsed:p,collapsedRows:G,responsiveCols:v,responsiveQuery:_}=this;i.forEach(l=>{var S,h,c;if(((S=l==null?void 0:l.type)===null||S===void 0?void 0:S.__GRID_ITEM__)!==!0)return;const R=z(l),B=Number((c=y((h=R.props)===null||h===void 0?void 0:h.span,_))!==null&&c!==void 0?c:M);B!==0&&f.push({child:R,rawChildSpan:B})});let m=0;const d=(n=f[f.length-1])===null||n===void 0?void 0:n.child;if(d!=null&&d.props){const l=(a=d.props)===null||a===void 0?void 0:a.suffix;l!==void 0&&l!==!1&&(m=(t=(r=d.props)===null||r===void 0?void 0:r.span)!==null&&t!==void 0?t:M,d.props.privateSpan=m,d.props.privateColStart=v+1-m,d.props.privateShow=!0)}let u=0,b=!1;for(const{child:l,rawChildSpan:S}of f){if(b&&(this.overflow=!0),!b){const h=Number((o=y((s=l.props)===null||s===void 0?void 0:s.offset,_))!==null&&o!==void 0?o:0),c=Math.min(S+h,v)||1;if(l.props?(l.props.privateSpan=c,l.props.privateOffset=h):l.props={privateSpan:c,privateOffset:h},p){const R=u%v;c+R>v&&(u+=v-R),c+u+m>G*v?b=!0:u+=c}}b&&(l.props?l.props.privateShow!==!0&&(l.props.privateShow=!1):l.props={privateShow:!1})}return E("div",U({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),f.map(({child:l})=>l))};return this.isResponsive&&this.responsive==="self"?E(W,{onResize:this.handleResize},{default:e}):e()}});export{le as _,ae as a,H as b};
