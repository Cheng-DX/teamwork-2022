import{R as B}from"./rule.6029947b.js";import{r as C,e as d,bQ as E}from"./index.715954a5.js";import{u as g,a as A}from"./useLoading.49c5971f.js";function w(t){if(t<=0&&t%1!==0)throw Error("\u5012\u8BA1\u65F6\u7684\u65F6\u95F4\u5E94\u8BE5\u4E3A\u4E00\u4E2A\u6B63\u6574\u6570\uFF01");const{bool:r,setTrue:l,setFalse:c}=g(!1),e=C(0),n=d(()=>Boolean(e.value));let a;function f(v=t){e.value||(c(),e.value=v,a=setInterval(()=>{e.value-=1,e.value<=0&&(clearInterval(a),l())},1e3))}function F(){a=clearInterval(a),e.value=0}return{counts:e,isCounting:n,start:f,stop:F,isComplete:r}}function L(){const{loading:t,startLoading:r,endLoading:l}=A(),{counts:c,start:e,isCounting:n}=w(60),a="\u83B7\u53D6\u9A8C\u8BC1\u7801",f=u=>`${u}\u79D2\u540E\u91CD\u65B0\u83B7\u53D6`,F=d(()=>{let u=a;return t.value&&(u=""),n.value&&(u=f(c.value)),u});function v(u){var i,s;let o=!0;return u.trim()===""?((i=window.$message)==null||i.error("\u624B\u673A\u53F7\u7801\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),o=!1):B.test(u)||((s=window.$message)==null||s.error("\u624B\u673A\u53F7\u7801\u683C\u5F0F\u9519\u8BEF\uFF01"),o=!1),o}async function m(u){var s;if(!v(u)||t.value)return;r();const{data:i}=await E(u);i&&((s=window.$message)==null||s.success("\u9A8C\u8BC1\u7801\u53D1\u9001\u6210\u529F\uFF01"),e()),l()}return{label:F,start:e,isCounting:n,getSmsCode:m,loading:t}}export{L as u};
