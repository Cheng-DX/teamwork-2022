import{d as z,r as D,a as O,c as a,i as V,_ as c,b as I,F as $,u as T,e as E,f as R,g as q,w as f,o as L,h as w,j as P}from"./index.202d693a.js";import{N as Z,u as G}from"./index.b09deb89.js";import{u as H,_ as J}from"./useOption.8a573d00.js";import{f as U,_ as K,a as M}from"./rule.71e9ab13.js";import{_ as j}from"./Space.fec248b2.js";import{_ as d}from"./Input.e67e0d4e.js";import{N as Q}from"./InputNumber.b5e3c9c9.js";import{_ as W,N as X}from"./Dropdown.e08b9672.js";import{F as Y}from"./FlashOutline.5e2bf0fd.js";import"./use-locale.a0ad6277.js";import"./DataTable.d585bb1f.js";import"./Checkbox.409a15a5.js";import"./RadioGroup.2cc0ad11.js";import"./get-slot.ef4c002f.js";import"./next-frame-once.3f36dc6b.js";import"./useBoolean.dd387fb2.js";function C(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!V(n)}function S(n){return a($,null,[a(c,{type:"primary",round:!0,secondary:!0,size:"medium"},C(n)?n:{default:()=>[n]}),a("div",{class:"w-18px"},null)])}var ee=z({props:{columnSrcs:{type:Array,required:!0}},setup(n){var k,v,b,h,i,o,g;const _=D(null),r=O({}),y={};function m(e){!_.value||(e.preventDefault(),_.value.validate(t=>{var s,u;t?(u=window.$message)==null||u.error("\u672A\u901A\u8FC7\u9A8C\u8BC1"):(s=window.$message)==null||s.success("Succeed!")}))}for(const e of n.columnSrcs){y[e.key]=((k=e==null?void 0:e.form)==null?void 0:k.type)==="number"?U.biggerThenZeroInt:U.notBlank;const t=(v=e.form)==null?void 0:v.defaultValue;if(t==null)(b=e==null?void 0:e.form)!=null&&b.creator?r[e.key]=e.form.creator():((h=e==null?void 0:e.form)==null?void 0:h.type)==="number"?r[e.key]=0:((i=e==null?void 0:e.form)==null?void 0:i.type)==="date"?r[e.key]=new Date().getTime():((o=e==null?void 0:e.form)==null?void 0:o.type)==="select"?r[e.key]=null:r[e.key]="";else switch((g=e==null?void 0:e.form)==null?void 0:g.type){case"number":r[e.key]=Number(t);break;case"input":r[e.key]=String(t);break;case"select":r[e.key]=t;break;default:r[e.key]="";break}}function p(e,t){var N,x,F,A,B;const s=((N=e==null?void 0:e.form)==null?void 0:N.placeholder)||`\u8BF7\u8F93\u5165${e.title}`,u=((x=e==null?void 0:e.form)==null?void 0:x.disabled)||!1;if((F=e.form)!=null&&F.renderer)return e.form.renderer(t[e.key]);if((A=e==null?void 0:e.form)!=null&&A.type)switch(e.form.type){case"input":return e.key==="id"?a("div",{class:"flex-y-center w-full"},[S(e.title),a(d,{value:t[e.key],"onUpdate:value":l=>t[e.key]=l,placeholder:s,disabled:u,class:"w-full"},null)]):a(d,{value:t[e.key],"onUpdate:value":l=>t[e.key]=l,placeholder:s,disabled:u,class:"w-full"},null);case"select":return a(W,{value:t[e.key],"onUpdate:value":l=>t[e.key]=l,options:(B=e.form)==null?void 0:B.options,placeholder:s,disabled:u,class:"w-full"},null);case"date":return a(Z,{value:t[e.key],"onUpdate:value":l=>t[e.key]=l,placeholder:s,disabled:u,class:"w-full"},null);case"number":return a(Q,{value:t[e.key],"onUpdate:value":l=>t[e.key]=l,placeholder:s,validator:l=>l>0,disabled:u,class:"w-full"},null);case"textarea":return a(d,{type:"textarea",value:t[e.key],"onUpdate:value":l=>t[e.key]=l,placeholder:s,disabled:u,class:"w-full"},null);default:return a(d,{value:t[e.key],"onUpdate:value":l=>t[e.key]=l,placeholder:s,disabled:u,class:"w-full"},null)}else return a(d,{value:t[e.key],"onUpdate:value":l=>t[e.key]=l,placeholder:s,disabled:u,class:"w-full"},null)}return()=>a(M,{ref:_,model:r,rules:y,size:"large",showLabel:!1},{default:()=>[n.columnSrcs.map(e=>{var s;let t;return(s=e==null?void 0:e.form)!=null&&s.break?null:a(K,{path:e.key,class:"w-full"},C(t=p(e,r))?t:{default:()=>[t]})}),a(j,{vertical:!0,size:18},{default:()=>[a(c,{type:"primary",round:!0,size:"large",block:!0,onClick:m},{default:()=>[I("\u786E\u5B9A")]})]})]})}});const te=I("\u65B0\u5EFA\u8BA2\u5355"),he=z({setup(n){const{isFullscreen:_}=T(),{data:r,columns:y,columnSrc:m}=G(),p=D(""),k=E(()=>p.value?r.value.filter(i=>i.name.includes(p.value)):r.value);y.value.push(H(v));function v(i){r.value.splice(r.value.findIndex(o=>o.id===i.id),1)}const b=R();function h(){b.success({title:"\u65B0\u5EFA\u8BA2\u5355",content:()=>P(ee,{columnSrcs:m})})}return(i,o)=>{const g=c,e=X,t=d,s=j;return L(),q(s,{vertical:!0,size:16},{default:f(()=>[a(s,{vertical:""},{default:f(()=>[a(J,{title:"\u6211\u7684\u8BA2\u5355",columns:w(y),data:w(k),"page-size":15,height:w(_)?580:480},{default:f(()=>[a(s,{justify:"space-between"},{default:f(()=>[a(g,{type:"primary",secondary:"",onClick:h},{default:f(()=>[te]),_:1}),a(t,{value:p.value,"onUpdate:value":o[0]||(o[0]=u=>p.value=u),placeholder:"\u641C\u7D22",round:"",clearable:""},{prefix:f(()=>[a(e,{component:w(Y)},null,8,["component"])]),_:1},8,["value"])]),_:1})]),_:1},8,["columns","data","height"])]),_:1})]),_:1})}}});export{he as default};
